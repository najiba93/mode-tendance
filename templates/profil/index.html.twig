{% extends 'base.html.twig' %}
{# Ce fichier hérite du template principal base.html.twig #}

{% block main %}
{# Début du bloc "main" qui sera affiché dans la section principale de la page #}

<div class="container">
  <h2>Mon Profil</h2>
  {# Titre principal de la page #}

  {# Affichage des informations de l'utilisateur #}
  <p><strong>ID :</strong> {{ user.id }}</p>
  <p><strong>Prénom :</strong> {{ user.firstName }}</p>
  <p><strong>Nom :</strong> {{ user.lastName }}</p>
  <p><strong>Email :</strong> {{ user.email }}</p>
  <p><strong>Adresse postale :</strong> {{ user.adressePostale ?: 'Non renseignée' }}</p>
  <p><strong>Téléphone :</strong> {{ user.telephone ?: 'Non renseigné' }}</p>
  <p><strong>Adresse de livraison :</strong> {{ user.adresseLivraison ?: 'Non renseignée' }}</p>
  {# Le symbole ?: permet d'afficher un texte par défaut si la valeur est vide #}

  <button id="editProfile">Modifier mon profil</button>
  {# Bouton pour afficher le formulaire de modification #}

  <div id="profileForm" style="display:none; margin-top:20px;">
    {# Formulaire caché au départ, qui s'affiche quand on clique sur "Modifier mon profil" #}
    <h3>Modifier les informations</h3>

    {{ form_start(form) }}
    {# Début du formulaire Symfony #}

      {# Chaque champ du formulaire est affiché avec form_row #}
      {{ form_row(form.firstName) }}
      {{ form_row(form.lastName) }}
      {{ form_row(form.nom) }}
      {{ form_row(form.email) }}
      {{ form_row(form.adressePostale) }}
      {{ form_row(form.telephone) }}
      {{ form_row(form.adresseLivraison) }}

      {# Bouton pour soumettre le formulaire #}
      <button type="submit">Enregistrer</button>

      {# Bouton pour annuler la modification et cacher le formulaire #}
      <button type="button" id="cancelEdit">Annuler</button>

    {{ form_end(form) }}
    {# Fin du formulaire Symfony #}
  </div>
</div>

{# Script JavaScript pour afficher ou cacher le formulaire #}
<script>
document.getElementById('editProfile').onclick = function() {
  // Quand on clique sur "Modifier mon profil", on affiche le formulaire
  document.getElementById('profileForm').style.display = 'block';
  this.style.display = 'none'; // On cache le bouton
};

document.getElementById('cancelEdit').onclick = function() {
  // Quand on clique sur "Annuler", on cache le formulaire
  document.getElementById('profileForm').style.display = 'none';
  document.getElementById('editProfile').style.display = 'inline-block'; // On réaffiche le bouton
};
</script>

{% endblock %}
{# Fin du bloc "main" #}
